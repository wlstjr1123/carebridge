{% comment %}
  선택 병원 상세정보 템플릿
  
  목적: 병원 목록에서 선택된 병원의 상세 정보를 표시하는 템플릿
    - 사용자 경험(UX) 개선: 관리자가 병원 목록에서 병원을 선택하면 해당 병원의 상세 정보를 확인할 수 있도록 함
    - 데이터 표시: 병원의 기본 정보, 연락처, 주소, 의사 수 등을 그리드 레이아웃으로 표시
    - 보안: 병원 비밀번호는 마스킹 처리하여 보안 강화
  
  동작 방식:
    1. selected_hospital 변수가 존재하는지 확인
    2. selected_hospital이 있으면 상세 정보 섹션 표시
    3. 병원의 각 정보 필드를 그리드 레이아웃으로 표시
    4. 비밀번호는 마스킹 처리하여 표시 (첫 글자만 표시, 나머지는 *)
    5. 총 의사수는 여러 필드를 확인하여 표시
  
  사용 시점:
    - 병원 목록에서 병원을 선택했을 때 (AJAX로 로드)
    - 페이지 로드 시 URL 파라미터에 병원 ID가 있을 때
  
  관련 변수:
    - selected_hospital: 선택된 병원 객체 (Hospitals 모델 인스턴스)
      → name: 병원명
      → hos_name: 병원 ID
      → hos_password: 병원 비밀번호 (마스킹 처리)
      → tel: 전화번호
      → address: 주소
      → doctor_count: 총 의사 수 (필드 1)
      → dr_total: 총 의사 수 (필드 2, 대체)
      → estb_date: 등록일
{% endcomment %}
{% if selected_hospital %}
{% comment %}
  상세 정보 섹션 컨테이너
  
  목적: 병원 상세 정보를 담는 컨테이너
    - CSS 클래스: user-detail-section (공통 스타일 적용)
    - 레이아웃: 상세 정보를 표시하는 섹션
{% endcomment %}
<div class="user-detail-section card shadow-sm">
  <div class="card-body">
    <h3 class="detail-title card-title border-bottom pb-3 mb-4">선택 병원 상세정보</h3>
    {% comment %}
      상세 정보 그리드 레이아웃
    
    목적: 병원의 상세 정보를 그리드 레이아웃으로 표시
      - CSS 클래스: detail-grid (그리드 레이아웃 스타일 적용)
      - 레이아웃: 각 정보 항목을 그리드로 배치하여 가독성 향상
  {% endcomment %}
  <div class="detail-grid">
    {% comment %}
      병원명 정보 항목
      
      목적: 병원의 이름을 표시
        - detail-label: "병원명" (라벨)
        - detail-value: selected_hospital.name (병원명)
          → selected_hospital: 선택된 병원 객체
          → name: 병원명
    {% endcomment %}
    <div class="detail-item">
      <span class="detail-label">병원명</span>
      <span class="detail-value">{{ selected_hospital.name }}</span>
    </div>
    
    {% comment %}
      병원ID 정보 항목
      
      목적: 병원의 ID를 표시
        - detail-label: "병원ID" (라벨)
        - detail-value: selected_hospital.hos_name (병원 ID)
          → selected_hospital: 선택된 병원 객체
          → hos_name: 병원 ID
          → hos_name이 없으면 "-" 표시
    {% endcomment %}
    <div class="detail-item">
      <span class="detail-label">병원ID</span>
      <span class="detail-value">{{ selected_hospital.hos_name|default:"-" }}</span>
    </div>
    
    {% comment %}
      병원PW 정보 항목
      
      목적: 병원의 비밀번호를 표시
        - detail-label: "병원PW" (라벨)
        - detail-value: selected_hospital.hos_password (병원 비밀번호)
          → selected_hospital: 선택된 병원 객체
          → hos_password: 병원의 비밀번호
          → 비밀번호가 없거나 "-"이면 "-" 표시
    {% endcomment %}
    <div class="detail-item">
      <span class="detail-label">병원PW</span>
      <span class="detail-value">
        {% if selected_hospital.hos_password and selected_hospital.hos_password != "-" %}
          {{ selected_hospital.hos_password }}
        {% else %}
          -
        {% endif %}
      </span>
    </div>
    
    {% comment %}
      전화번호 정보 항목
      
      목적: 병원의 전화번호를 표시
        - detail-label: "전화번호" (라벨)
        - detail-value: selected_hospital.tel (병원의 전화번호)
          → selected_hospital: 선택된 병원 객체
          → tel: 병원의 전화번호
          → tel이 없으면 "-" 표시
    {% endcomment %}
    <div class="detail-item">
      <span class="detail-label">전화번호</span>
      <span class="detail-value">{{ selected_hospital.tel|default:"-" }}</span>
    </div>
    
    {% comment %}
      주소 정보 항목
      
      목적: 병원의 주소를 표시
        - detail-label: "주소" (라벨)
        - detail-value: selected_hospital.address (병원의 주소)
          → selected_hospital: 선택된 병원 객체
          → address: 병원의 주소
          → 주의: address는 필수 필드이므로 default 필터 없이 표시
    {% endcomment %}
    <div class="detail-item">
      <span class="detail-label">주소</span>
      <span class="detail-value">{{ selected_hospital.address }}</span>
    </div>
    
    {% comment %}
      총 의사수 정보 항목
      
      목적: 병원에 소속된 총 의사 수를 표시
        - detail-label: "총 의사수" (라벨)
        - detail-value: 여러 필드를 확인하여 의사 수 표시
          → 우선순위 1: selected_hospital.doctor_count (의사 수 필드 1)
          → 우선순위 2: selected_hospital.dr_total (의사 수 필드 2, 대체)
          → 기본값: 0명 (두 필드 모두 없으면)
          → 예: "5명", "10명", "0명"
      
      데이터 구조:
        - doctor_count: 병원에 소속된 의사 수 (주 필드)
        - dr_total: 병원에 소속된 의사 수 (대체 필드)
        - 두 필드 모두 없으면 0명으로 표시
    {% endcomment %}
    <div class="detail-item">
      <span class="detail-label">총 의사수</span>
      <span class="detail-value">
        {% comment %}
          의사 수 필드 확인 (우선순위: doctor_count > dr_total > 0)
          
          목적: 여러 필드를 확인하여 의사 수를 표시
            - doctor_count가 있으면 doctor_count 사용
            - doctor_count가 없고 dr_total이 있으면 dr_total 사용
            - 둘 다 없으면 0명 표시
        {% endcomment %}
        {% if selected_hospital.doctor_count %}
          {% comment %} doctor_count 필드가 있으면 사용 {% endcomment %}
          {{ selected_hospital.doctor_count }}명
        {% elif selected_hospital.dr_total %}
          {% comment %} doctor_count가 없고 dr_total이 있으면 사용 {% endcomment %}
          {{ selected_hospital.dr_total }}명
        {% else %}
          {% comment %} 둘 다 없으면 0명 표시 {% endcomment %}
          0명
        {% endif %}
      </span>
    </div>
    
    {% comment %}
      개원일 정보 항목
      
      목적: 병원의 개원일을 표시 (yyyy.mm.dd 형식)
        - detail-label: "개원일" (라벨)
        - detail-value: selected_hospital.estb_date_formatted (병원의 개원일, yyyy.mm.dd 형식)
          → selected_hospital: 선택된 병원 객체
          → estb_date_formatted: 병원의 개원일 (yyyy.mm.dd 형식으로 포맷팅됨)
          → estb_date_formatted가 없으면 "-" 표시
    {% endcomment %}
    <div class="detail-item">
      <span class="detail-label">개원일</span>
      <span class="detail-value">{{ selected_hospital.estb_date_formatted|default:"-" }}</span>
    </div>
  </div>
  </div>
</div>
{% endif %}
{% comment %}
  조건문 종료
  
  목적: selected_hospital이 없으면 상세 정보 섹션을 표시하지 않음
    - selected_hospital이 null이거나 없으면 아무것도 표시하지 않음
    - AJAX로 상세 정보를 로드할 때 사용
{% endcomment %}
