<!-- 
  의사 승인 대기 페이지 템플릿
  
  목적: 승인 대기 중인 의사 목록을 표시하고 승인/거절 처리를 할 수 있는 관리자 페이지
    - 사용자 경험(UX) 개선: 관리자가 승인 대기 중인 의사 목록을 확인하고 일괄 승인/거절 처리
    - 데이터 관리: 의사 승인 신청 목록을 테이블로 표시하고 상세 정보 확인
    - 기능 제공: 정렬, 페이지네이션, 체크박스 선택, 승인/거절 처리
  
  주요 기능:
    - 의사 목록 표시: 승인 대기 중인 의사 목록을 테이블로 표시
    - 정렬 기능: No., 이름, ID, 병원명, 전공과, 면허번호, 생성일시로 정렬 가능
    - 페이지네이션: 많은 데이터를 페이지 단위로 나누어 표시
    - 체크박스 선택: 여러 의사를 선택하여 일괄 승인/거절 처리
    - 상세 정보 표시: 의사 행 클릭 시 상세 정보를 AJAX로 로드하여 표시
    - 승인/거절 처리: 선택한 의사를 승인하거나 거절 처리
  
  관련 파일:
    - CSS: admin_common.css, approval_pending.css
    - JavaScript: admin_common.js, approval_pending.js
    - 상세 정보 템플릿: approval_pending_detail.html (AJAX로 로드)
-->
{% load static %}
{% load masking_filters %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- 
    HTML 문서 메타 정보
    
    목적: 문서의 기본 정보 및 설정
      - charset: UTF-8 인코딩 설정 (한글 지원)
      - viewport: 반응형 디자인을 위한 뷰포트 설정
      - title: 브라우저 탭에 표시될 페이지 제목
  -->
  <meta charset="UTF-8">
  <!-- 
    뷰포트 설정
    
    목적: 모바일 기기에서 올바른 화면 크기로 표시되도록 설정
      - width=device-width: 기기의 실제 너비에 맞춤
      - initial-scale=1.0: 초기 확대/축소 비율 100%
      - minimum-scale=0.5: 최소 확대/축소 비율 50%
      - maximum-scale=2.0: 최대 확대/축소 비율 200%
  -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0">
  <title>의사 승인 대기 - CareBridge 관리자</title>
  <!-- Favicon 설정 -->
  <link rel="icon" href="{% static 'core/img/favicon.png' %}" type="image/png">
  
  <!-- 
    CSS 파일 로드
    
    목적: 페이지 스타일링을 위한 CSS 파일 로드
      - admin_common.css: 관리자 패널 공통 스타일
      - approval_pending.css: 승인 대기 페이지 전용 스타일
  -->
  <link rel="stylesheet" href="{% static 'admin_panel/css/admin_common.css' %}">
  <link rel="stylesheet" href="{% static 'admin_panel/css/approval_pending.css' %}">
</head>
<body>
  {% comment %}
    헤더 섹션
    
    목적: 페이지 상단에 로고와 사용자 정보, 로그아웃 버튼을 표시
      - 로고: CareBridge 로고 이미지 및 대시보드 링크
      - 사용자 정보: 로그인한 관리자 이름 표시
      - 로그아웃 버튼: 로그아웃 기능 제공
      - 공통 헤더 템플릿 사용: core/header.html
  {% endcomment %}
  {% include 'core/_header.html' %}

  <!-- 
    메인 컨테이너
    
    목적: 페이지의 주요 내용을 담는 컨테이너
      - CSS 클래스: container (컨테이너 스타일)
      - 내용: 탭, 승인 대기 헤더, 목록, 페이지네이션, 상세 정보
  -->
  <div class="container">
    <!-- 
      상단 탭 메뉴
      
      목적: 관리자 패널의 각 페이지로 이동할 수 있는 탭 메뉴
        - 사용자 경험(UX) 개선: 관리자가 쉽게 다른 페이지로 이동할 수 있도록 함
        - 현재 페이지 표시: active 클래스로 현재 페이지 표시
    -->
    <div class="tabs">
      <!-- 
        사용자목록 탭
        
        목적: 사용자 목록 페이지로 이동
          - href: {% url 'user_list' %} - 사용자 목록 URL
          - CSS 클래스: tab (탭 스타일)
      -->
      <a href="{% url 'user_list' %}" class="tab">사용자목록</a>
      
      <!-- 
        의사목록 탭
        
        목적: 의사 목록 페이지로 이동
          - href: {% url 'doctor_list' %} - 의사 목록 URL
          - CSS 클래스: tab (탭 스타일)
      -->
      <a href="{% url 'doctor_list' %}" class="tab">의사목록</a>
      
      <!-- 
        병원정보 탭
        
        목적: 병원 정보 페이지로 이동
          - href: {% url 'hospital_list' %} - 병원 정보 URL
          - CSS 클래스: tab (탭 스타일)
      -->
      <a href="{% url 'hospital_list' %}" class="tab">병원정보</a>
      
      <!-- 
        승인대기 탭 (현재 페이지)
        
        목적: 승인 대기 페이지로 이동 (현재 페이지)
          - href: {% url 'approval_pending' %} - 승인 대기 URL
          - CSS 클래스: tab active (탭 스타일 + 현재 페이지 표시)
      -->
      <a href="{% url 'approval_pending' %}" class="tab active">승인대기</a>
      
      <!-- 
        1:1문의관리 탭
        
        목적: 1:1 문의 관리 페이지로 이동
          - href: {% url 'qna_list' %} - 1:1 문의 목록 URL
          - CSS 클래스: tab (탭 스타일)
      -->
      <a href="{% url 'qna_list' %}" class="tab">1:1문의관리</a>
    </div>

    <!-- 
      승인 대기 헤더 섹션
      
      목적: 승인 대기 페이지의 제목과 통계 정보 표시
        - 사용자 경험(UX) 개선: 승인 대기 중인 의사 수를 명확히 표시
        - 정보 제공: 승인 대기 중인 의사 수와 검증 필요 안내
    -->
    <div class="approval-header">
      <!-- 
        승인 대기 제목
        
        목적: 페이지 제목 표시
          - CSS 클래스: approval-title (제목 스타일)
          - 텍스트: "의사 승인 대기"
      -->
      <div class="approval-title">의사 승인 대기</div>
      
      <!-- 
        승인 대기 수 표시
        
        목적: 승인 대기 중인 의사 수를 표시
          - CSS 클래스: approval-count (카운트 스타일)
          - {{ total_pending_count }}: 승인 대기 중인 의사 수 (뷰에서 전달된 변수)
          - 예: "5명"
      -->
      <div class="approval-count">{{ total_pending_count }}명</div>
      
      <!-- 
        승인 대기 부제목
        
        목적: 승인 대기 상태에 대한 안내 메시지 표시
          - CSS 클래스: approval-subtitle (부제목 스타일)
          - 텍스트: "면허 및 병원 소속 검증 필요"
      -->
      <div class="approval-subtitle">면허 및 병원 소속 검증 필요</div>
    </div>

    <!-- 
      승인대기 목록 섹션
      
      목적: 승인 대기 중인 의사 목록을 테이블로 표시하고 승인/거절 처리 기능 제공
        - 사용자 경험(UX) 개선: 관리자가 승인 대기 중인 의사 목록을 확인하고 일괄 승인/거절 처리
        - 데이터 표시: 의사 정보를 테이블로 표시하여 가독성 향상
        - 기능 제공: 체크박스 선택, 정렬, 페이지네이션, 승인/거절 처리
    -->
    <div>
      <!-- 
        목록 헤더 및 액션 버튼 영역
        
        목적: 목록 제목과 승인/거절 버튼을 표시
          - display: flex: 플렉스 레이아웃 사용
          - justify-content: space-between: 양쪽 끝에 배치
          - align-items: center: 수직 중앙 정렬
      -->
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <!-- 
          목록 제목
          
          목적: 승인대기 목록 섹션의 제목 표시
            - 인라인 스타일: margin, font-size, font-weight, color 설정
            - 텍스트: "승인대기 목록"
        -->
        <h3 style="margin: 0; font-size: 16px; font-weight: 600; color: #1B3C73;">승인대기 목록</h3>
        
        <!-- 
          승인/거절 액션 버튼 영역
          
          목적: 선택한 의사를 승인하거나 거절하는 버튼 표시
            - CSS 클래스: approval-actions (액션 버튼 영역 스타일)
        -->
        <div class="approval-actions">
          <!-- 
            승인/거절 처리 폼
            
            목적: 선택한 의사를 승인하거나 거절하기 위한 폼
              - method="post": POST 메서드로 서버에 데이터 전송
              - action: {% url 'approval_pending' %} - 승인 대기 페이지 URL (자기 자신)
              - id="approvalForm": JavaScript에서 폼 제출을 위한 ID
              - style="display: inline;": 인라인 표시 (버튼과 같은 줄에 표시)
          -->
          <form method="post" action="{% url 'approval_pending' %}" id="approvalForm" style="display: inline;">
            <!-- 
              CSRF 토큰
              
              목적: CSRF 공격 방지를 위한 토큰
                - {% csrf_token %}: Django의 CSRF 토큰 생성
                - POST 요청 시 필수
            -->
            {% csrf_token %}
            
            <!-- 
              액션 타입 숨겨진 입력 필드
              
              목적: 승인 또는 거절 액션을 구분하기 위한 필드
                - type="hidden": 숨겨진 입력 필드 (사용자에게 보이지 않음)
                - name="action": 서버에서 액션 타입을 읽기 위한 필드 이름
                - id="actionInput": JavaScript에서 값을 설정하기 위한 ID
                - value="": 초기값은 빈 문자열 (JavaScript에서 "approve" 또는 "reject"로 설정)
            -->
            <input type="hidden" name="action" id="actionInput" value="">
            
            <!-- 
              선택된 의사 ID 목록 숨겨진 입력 필드
              
              목적: 선택한 의사의 ID 목록을 저장하여 서버에 전송
                - type="hidden": 숨겨진 입력 필드 (사용자에게 보이지 않음)
                - name="doctor_ids": 서버에서 의사 ID 목록을 읽기 위한 필드 이름
                - id="doctorIdsInput": JavaScript에서 값을 설정하기 위한 ID
                - value="": 초기값은 빈 문자열 (JavaScript에서 선택된 의사 ID를 쉼표로 구분하여 설정)
                - 예: "1,2,3" (의사 ID가 1, 2, 3인 경우)
            -->
            <input type="hidden" name="doctor_ids" id="doctorIdsInput" value="">
            
            <!-- 
              승인 버튼
              
              목적: 선택한 의사를 승인 처리
                - type="button": 버튼 타입 (폼 제출 방지, JavaScript로 처리)
                - id="approveBtn": JavaScript에서 이벤트 리스너 연결을 위한 ID
                - CSS 클래스: btn-approve (승인 버튼 스타일)
                - 텍스트: "승인"
            -->
            <button type="button" id="approveBtn" class="btn-approve">승인</button>
            
            <!-- 
              승인 거절 버튼
              
              목적: 선택한 의사의 승인을 거절 처리
                - type="button": 버튼 타입 (폼 제출 방지, JavaScript로 처리)
                - id="rejectBtn": JavaScript에서 이벤트 리스너 연결을 위한 ID
                - CSS 클래스: btn-reject (거절 버튼 스타일)
                - 텍스트: "승인 거절"
            -->
            <button type="button" id="rejectBtn" class="btn-reject">승인 거절</button>
          </form>
        </div>
      </div>

      <!-- 
        테이블 컨테이너
        
        목적: 테이블을 담는 컨테이너
          - CSS 클래스: table-container (테이블 컨테이너 스타일)
          - 스크롤: 테이블이 길 경우 스크롤 처리
      -->
      <div class="table-container">
        <!-- 
          승인 대기 테이블
          
          목적: 승인 대기 중인 의사 목록을 테이블로 표시
            - CSS 클래스: approval-table (테이블 스타일)
            - 구조: thead (헤더), tbody (본문)
        -->
        <table class="approval-table">
          <!-- 
            테이블 헤더
            
            목적: 테이블의 컬럼 제목 표시
              - 정렬 기능: 대부분의 컬럼에 정렬 기능 제공
              - 체크박스: 전체 선택 체크박스
          -->
          <thead>
            <tr>
              <!-- 
                전체 선택 체크박스 컬럼
                
                목적: 모든 의사를 일괄 선택/해제할 수 있는 체크박스
                  - style="width: 40px;": 컬럼 너비 40px
                  - id="selectAll": JavaScript에서 이벤트 리스너 연결을 위한 ID
              -->
              <th style="width: 40px;">
                <input type="checkbox" id="selectAll">
              </th>
              
              <!-- 
                No. 컬럼 (정렬 가능)
                
                목적: 의사 번호를 표시하고 정렬 기능 제공
                  - data-sort-field="doctor_id": 정렬 필드 이름
                  - data-current-sort: 현재 정렬 필드 (뷰에서 전달)
                  - data-current-order: 현재 정렬 방향 (뷰에서 전달)
                  - 정렬 방향 표시: 현재 정렬 필드가 'doctor_id'이면 화살표 표시 (↑ 또는 ↓)
              -->
              <th>
                <a href="#" data-sort-field="doctor_id" data-current-sort="{{ sort_field }}" data-current-order="{{ sort_order }}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                  No.
                  {% if sort_field == 'doctor_id' %}
                    {% if sort_order == 'asc' %}↑{% else %}↓{% endif %}
                  {% endif %}
                </a>
              </th>
              
              <!-- 
                이름 컬럼 (정렬 가능)
                
                목적: 의사 이름을 표시하고 정렬 기능 제공
                  - data-sort-field="name": 정렬 필드 이름
                  - 정렬 방향 표시: 현재 정렬 필드가 'name'이면 화살표 표시
              -->
              <th>
                <a href="#" data-sort-field="name" data-current-sort="{{ sort_field }}" data-current-order="{{ sort_order }}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                  이름
                  {% if sort_field == 'name' %}
                    {% if sort_order == 'asc' %}↑{% else %}↓{% endif %}
                  {% endif %}
                </a>
              </th>
              
              <!-- 
                ID 컬럼 (정렬 가능)
                
                목적: 의사 ID(로그인 ID)를 표시하고 정렬 기능 제공
                  - data-sort-field="username": 정렬 필드 이름
                  - 정렬 방향 표시: 현재 정렬 필드가 'username'이면 화살표 표시
              -->
              <th>
                <a href="#" data-sort-field="username" data-current-sort="{{ sort_field }}" data-current-order="{{ sort_order }}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                  ID
                  {% if sort_field == 'username' %}
                    {% if sort_order == 'asc' %}↑{% else %}↓{% endif %}
                  {% endif %}
                </a>
              </th>
              
              <!-- 
                병원명 컬럼 (정렬 가능)
                
                목적: 의사의 주근무 병원명을 표시하고 정렬 기능 제공
                  - data-sort-field="hospital": 정렬 필드 이름
                  - 정렬 방향 표시: 현재 정렬 필드가 'hospital'이면 화살표 표시
              -->
              <th>
                <a href="#" data-sort-field="hospital" data-current-sort="{{ sort_field }}" data-current-order="{{ sort_order }}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                  병원명
                  {% if sort_field == 'hospital' %}
                    {% if sort_order == 'asc' %}↑{% else %}↓{% endif %}
                  {% endif %}
                </a>
              </th>
              
              <!-- 
                전공과 컬럼 (정렬 가능)
                
                목적: 의사의 전공과를 표시하고 정렬 기능 제공
                  - data-sort-field="department": 정렬 필드 이름
                  - 정렬 방향 표시: 현재 정렬 필드가 'department'이면 화살표 표시
              -->
              <th>
                <a href="#" data-sort-field="department" data-current-sort="{{ sort_field }}" data-current-order="{{ sort_order }}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                  전공과
                  {% if sort_field == 'department' %}
                    {% if sort_order == 'asc' %}↑{% else %}↓{% endif %}
                  {% endif %}
                </a>
              </th>
              
              <!-- 
                면허번호 컬럼 (정렬 가능)
                
                목적: 의사의 면허번호를 표시하고 정렬 기능 제공
                  - data-sort-field="license_no": 정렬 필드 이름
                  - 정렬 방향 표시: 현재 정렬 필드가 'license_no'이면 화살표 표시
              -->
              <th>
                <a href="#" data-sort-field="license_no" data-current-sort="{{ sort_field }}" data-current-order="{{ sort_order }}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                  면허번호
                  {% if sort_field == 'license_no' %}
                    {% if sort_order == 'asc' %}↑{% else %}↓{% endif %}
                  {% endif %}
                </a>
              </th>
              
              <!-- 
                전화번호 컬럼 (정렬 불가)
                
                목적: 의사의 전화번호를 표시
                  - 정렬 기능 없음: 전화번호는 정렬 불가
              -->
              <th>전화번호</th>
              
              <!-- 
                생성일시 컬럼 (정렬 가능)
                
                목적: 의사 계정 생성일시를 표시하고 정렬 기능 제공
                  - data-sort-field="created_at": 정렬 필드 이름
                  - 정렬 방향 표시: 현재 정렬 필드가 'created_at'이면 화살표 표시
              -->
              <th>
                <a href="#" data-sort-field="created_at" data-current-sort="{{ sort_field }}" data-current-order="{{ sort_order }}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                  생성일시
                  {% if sort_field == 'created_at' %}
                    {% if sort_order == 'asc' %}↑{% else %}↓{% endif %}
                  {% endif %}
                </a>
              </th>
            </tr>
          </thead>
          <!-- 
            테이블 본문
            
            목적: 승인 대기 중인 의사 목록을 테이블 행으로 표시
              - 반복문: doctors_with_validation 리스트를 순회하며 각 의사 정보를 행으로 표시
              - 데이터 표시: 의사의 각 정보 필드를 테이블 셀로 표시
              - 행 클릭: 행 클릭 시 상세 정보를 AJAX로 로드
          -->
          <tbody>
            <!-- 
              의사 목록 반복문
              
              목적: 승인 대기 중인 의사 목록을 순회하며 테이블 행 생성
                - doctors_with_validation: 뷰에서 전달된 의사 목록 (검증 정보 포함)
                  → 각 항목은 dict 형태: {'doctor': Doctors 객체, 'is_valid_license': boolean, 'number': int}
                - item: 현재 순회 중인 항목
                  → item.doctor: 의사 객체 (Doctors 모델 인스턴스)
                  → item.is_valid_license: 면허번호 유효성 검증 결과 (boolean)
                  → item.number: 목록 번호 (페이지네이션 고려)
            -->
            {% for item in doctors_with_validation %}
              <!-- 
                의사 정보 행
                
                목적: 의사의 정보를 테이블 행으로 표시
                  - data-doctor-id: 의사 ID (JavaScript에서 행 클릭 이벤트 처리에 사용)
                  - CSS 클래스:
                    → approval-row: 승인 대기 행 스타일
                    → invalid-license: 면허번호가 유효하지 않은 경우 추가되는 클래스 (빨간색 표시)
                    → selected: 현재 선택된 의사인 경우 추가되는 클래스 (하이라이트 표시)
                  - item.doctor: 의사 객체 (Doctors 모델 인스턴스)
                  - item.is_valid_license: 면허번호 유효성 검증 결과 (boolean)
              -->
              <tr 
                data-doctor-id="{{ item.doctor.doctor_id }}"
                class="approval-row {% if not item.is_valid_license %}invalid-license{% endif %} {% if selected_doctor and selected_doctor.doctor_id == item.doctor.doctor_id %}selected{% endif %}"
              >
                <!-- 
                  체크박스 셀
                  
                  목적: 의사를 선택하기 위한 체크박스
                    - CSS 클래스: checkbox-cell (체크박스 셀 스타일)
                    - name="doctor_checkbox": 체크박스 그룹 이름 (JavaScript에서 선택된 의사 ID 수집에 사용)
                    - value="{{ item.doctor.doctor_id }}": 체크박스 값 (의사 ID)
                -->
                <td class="checkbox-cell">
                  <input 
                    type="checkbox" 
                    name="doctor_checkbox" 
                    value="{{ item.doctor.doctor_id }}"
                    data-is-valid-license="{% if item.is_valid_license %}true{% else %}false{% endif %}"
                  >
                </td>
                
                <!-- 
                  번호 셀
                  
                  목적: 목록 번호 표시 (페이지네이션 고려)
                    - {{ item.number }}: 페이지네이션을 고려한 순번
                    - 예: 1페이지면 1, 2, 3... / 2페이지면 6, 7, 8... (페이지당 5개인 경우)
                -->
                <td>{{ item.number }}</td>
                
                <!-- 
                  이름 셀
                  
                  목적: 의사 이름 표시
                    - {{ item.doctor.user.name }}: 의사의 사용자 이름
                    - item.doctor: 의사 객체 (Doctors 모델 인스턴스)
                    - user: 의사의 사용자 정보 (Users 모델 인스턴스)
                    - name: 사용자의 이름
                -->
                <td>{{ item.doctor.user.name }}</td>
                
                <!-- 
                  ID 셀
                  
                  목적: 의사 ID(로그인 ID) 표시
                    - {{ item.doctor.user.username|default:"-" }}: 의사의 사용자 ID
                    - username: 사용자의 로그인 ID
                    - |default:"-": username이 없으면 "-" 표시
                -->
                <td>{{ item.doctor.user.username|default:"-" }}</td>
                
                <!-- 
                  병원명 셀
                  
                  목적: 의사의 주근무 병원명 표시
                    - {{ item.doctor.hos.name|default:"-" }}: 의사의 주근무 병원명
                    - hos: 의사의 주근무 병원 정보 (Hospitals 모델 인스턴스)
                    - name: 병원 이름
                    - |default:"-": name이 없으면 "-" 표시
                -->
                <td>{{ item.doctor.hos.name|default:"-" }}</td>
                
                <!-- 
                  전공과 셀
                  
                  목적: 의사의 전공과 표시
                    - {{ item.doctor.dep.dep_name|default:"-" }}: 의사의 전공과 이름
                    - dep: 의사의 전공과 정보 (Departments 모델 인스턴스)
                    - dep_name: 전공과 이름
                    - |default:"-": dep_name이 없으면 "-" 표시
                -->
                <td>{{ item.doctor.dep.dep_name|default:"-" }}</td>
                
                <!-- 
                  면허번호 셀
                  
                  목적: 의사의 면허번호 표시
                    - {{ item.doctor.license_no }}: 의사의 면허번호
                    - license_no: 의사의 면허번호 필드
                    - 주의: 면허번호가 유효하지 않으면 행에 invalid-license 클래스가 추가되어 빨간색으로 표시됨
                -->
                <td>{{ item.doctor.license_no }}</td>
                
                <!-- 
                  전화번호 셀 (마스킹 처리)
                  
                  목적: 의사의 전화번호를 마스킹 처리하여 표시 (개인정보 보호)
                    - {{ item.doctor.user.phone|mask_phone }}: 의사의 전화번호 마스킹 처리
                      → phone: 사용자의 전화번호
                      → mask_phone: 전화번호 마스킹 필터 (010 - 첫 번째 숫자*** - ****)
                    - mask_phone 필터가 이미 "-"을 반환하므로 default 필터 불필요
                -->
                <td>{{ item.doctor.user.phone|mask_phone }}</td>
                
                <!-- 
                  생성일시 셀
                  
                  목적: 의사 계정 생성일시 표시
                    - {{ item.doctor.user.created_at|date:"Y.m.d" }}: 의사 계정 생성일
                    - created_at: 사용자 계정 생성일 (의사 승인 신청일로 간주)
                    - |date:"Y.m.d": 날짜 형식을 "YYYY.MM.DD" 형식으로 변환
                    - 예: "2024.01.15"
                -->
                <td>{{ item.doctor.user.created_at|date:"Y.m.d" }}</td>
              </tr>
            {% empty %}
            <!-- 
              빈 목록 처리
              
              목적: 승인 대기 중인 의사가 없을 때 메시지 표시
                - empty: 반복문에서 반복할 항목이 없을 때 실행
                - colspan="9": 9개 컬럼을 병합하여 메시지 표시
                - CSS 클래스: no-data (데이터 없음 메시지 스타일)
            -->
            <tr>
              <td colspan="9" class="no-data">승인 대기 중인 의사가 없습니다.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- 
        페이지네이션 섹션
        
        목적: 많은 데이터를 페이지 단위로 나누어 표시하고 페이지 이동 기능 제공
          - 사용자 경험(UX) 개선: 많은 데이터를 페이지 단위로 나누어 가독성 향상
          - 파라미터 유지: 정렬 필드, 정렬 방향, 선택된 의사 ID를 URL 파라미터로 유지
          - AJAX 처리: JavaScript에서 AJAX로 페이지네이션 처리하여 페이지 새로고침 없이 목록 업데이트
        
        주요 기능:
          - 첫 페이지로 이동: « 버튼
          - 이전 페이지로 이동: < 버튼
          - 페이지 번호 표시: 현재 페이지 ±3 범위의 페이지 번호 표시
          - 다음 페이지로 이동: > 버튼
          - 마지막 페이지로 이동: » 버튼
      -->
      {% if page_obj.paginator.num_pages > 1 %}
      <div class="pagination">
        {% if page_obj.has_previous %}
          <a href="#" class="pagination-link" data-page="1" data-sort="{{ sort_field|default:'' }}" data-order="{{ sort_order|default:'' }}">«</a>
          <a href="#" class="pagination-link" data-page="{{ page_obj.previous_page_number }}" data-sort="{{ sort_field|default:'' }}" data-order="{{ sort_order|default:'' }}"><</a>
        {% else %}
          <span class="page-link disabled">«</span>
          <span class="page-link disabled"><</span>
        {% endif %}

        {% if page_obj.paginator.num_pages > 0 %}
          {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
              <span class="page-link active">{{ num }}</span>
            {% elif page_obj.number == 1 and num <= 4 %}
              <a href="#" class="pagination-link" data-page="{{ num }}" data-sort="{{ sort_field|default:'' }}" data-order="{{ sort_order|default:'' }}">{{ num }}</a>
            {% elif page_obj.number > 1 and num >= page_obj.number|add:'-1' and num <= page_obj.number|add:'2' %}
              <a href="#" class="pagination-link" data-page="{{ num }}" data-sort="{{ sort_field|default:'' }}" data-order="{{ sort_order|default:'' }}">{{ num }}</a>
            {% endif %}
          {% endfor %}
        {% else %}
          <span class="page-link active">1</span>
        {% endif %}

        {% if page_obj.has_next %}
          <a href="#" class="pagination-link" data-page="{{ page_obj.next_page_number }}" data-sort="{{ sort_field|default:'' }}" data-order="{{ sort_order|default:'' }}">></a>
          <a href="#" class="pagination-link" data-page="{{ page_obj.paginator.num_pages }}" data-sort="{{ sort_field|default:'' }}" data-order="{{ sort_order|default:'' }}">»</a>
        {% else %}
          <span class="page-link disabled">></span>
          <span class="page-link disabled">»</span>
        {% endif %}
      </div>
      {% endif %}
    </div>

    <!-- 
      승인신청 상세정보 섹션
      
      목적: 선택된 의사의 상세 정보를 표시하는 섹션
        - 사용자 경험(UX) 개선: 테이블 행 클릭 시 해당 의사의 상세 정보를 AJAX로 로드하여 표시
        - 데이터 표시: 의사의 기본 정보, 면허 정보, 병원 정보 등을 그리드 레이아웃으로 표시
        - 개인정보 보호: 주민번호는 마스킹 처리하여 개인정보 보호
        - 조건부 표시: selected_doctor가 있을 때만 상세 정보 표시, 없으면 플레이스홀더 표시
      
      동작 방식:
        1. selected_doctor 변수가 존재하는지 확인
        2. selected_doctor가 있으면 상세 정보 섹션 표시
        3. selected_doctor가 없으면 플레이스홀더 섹션 표시 (행 클릭 시 AJAX로 상세 정보 로드)
    -->
    {% if selected_doctor %}
    <!-- 
      상세 정보 섹션 (의사가 선택된 경우)
      
      목적: 선택된 의사의 상세 정보를 표시
        - CSS 클래스: user-detail-section (상세 정보 섹션 스타일)
        - 내용: 의사의 각 정보 필드를 그리드 레이아웃으로 표시
    -->
    <div class="user-detail-section">
      <!-- 
        상세 정보 제목
        
        목적: 상세 정보 섹션의 제목 표시
          - CSS 클래스: detail-title (제목 스타일)
          - 텍스트: "승인신청 상세정보"
      -->
      <h3 class="detail-title">승인신청 상세정보</h3>
      
      <!-- 
        상세 정보 그리드 레이아웃
        
        목적: 의사의 상세 정보를 그리드 레이아웃으로 표시
          - CSS 클래스: detail-grid (그리드 레이아웃 스타일)
          - 레이아웃: 각 정보 항목을 그리드로 배치하여 가독성 향상
      -->
      <div class="detail-grid">
        <!-- 
          면허번호 정보 항목
          
          목적: 의사의 의사 면허번호를 표시
            - detail-label: "면허번호" (라벨)
            - detail-value: {{ selected_doctor.license_no }} (의사의 면허번호)
        -->
        <div class="detail-item">
          <span class="detail-label">면허번호</span>
          <span class="detail-value">{{ selected_doctor.license_no }}</span>
        </div>
        
        <!-- 
          주민번호 정보 항목
          
          목적: 의사의 주민번호를 표시
            - detail-label: "주민번호" (라벨)
            - detail-value: {{ selected_doctor.user.resident_reg_no }} (의사의 주민번호)
              → 주민번호가 없으면 "-" 표시
        -->
        <div class="detail-item">
          <span class="detail-label">주민번호</span>
          <span class="detail-value">
            {% if selected_doctor.user.resident_reg_no %}
              {% with reg_no=selected_doctor.user.resident_reg_no|cut:"-" %}{{ reg_no|slice:":6" }}-{{ reg_no|slice:"6:" }}{% endwith %}
            {% else %}
              -
            {% endif %}
          </span>
        </div>
      </div>
    </div>
    {% endif %}
  </div>

  <!-- 
    JavaScript 파일 로드
    
    목적: 페이지의 동적 기능을 제공하기 위한 JavaScript 파일 로드
      - 로드 순서: admin_common.js를 먼저 로드한 후 approval_pending.js를 로드
      - admin_common.js: 관리자 패널 공통 JavaScript 함수들
        → 페이지네이션, 정렬, 검색 등 공통 기능
      - approval_pending.js: 승인 대기 페이지 전용 JavaScript 함수들
        → 의사 선택, 체크박스 관리, 승인/거절 처리 등
  -->
  <script src="{% static 'admin_panel/js/admin_common.js' %}"></script>
  <script src="{% static 'admin_panel/js/approval_pending.js' %}"></script>
</body>
</html>
